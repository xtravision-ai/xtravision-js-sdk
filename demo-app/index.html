<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width,
                   initial-scale=1.0"
    />
    <title>Xtravision</title>
  </head>
  <body>
    <form>
      <h1>XtraVision JS Bundle Example App</h1>
      <!-- <button onclick="document.location='assessment.html'" type="submit">
        Start Assessment
      </button> -->

      <button type="submit" id="submit">Start Assessment</button>

      <br />
      <br />

      <input type="radio" id="skeletonTrue" name="skeleton" value="true" />
      <label for="skeletonTrue">Enable Skeleton</label>
      <input type="radio" id="skeletonFalse" name="skeleton" value="false" />
      <label for="skeletonFalse">disable Skeleton</label>
    </form>
    <br />
    <label for="assessmentField">Enter assessment name: </label>
    <br />
    <input placeholder="eg: SQUATS" id="assessmentField" type="text" />
    <br />
    <br />
    <input placeholder="authToken..." id="authTokenField" type="text" />
  </body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    let params = {};

    const updateParams = (key, value) => {
      params[key] = value;
    };

    document.getElementsByName("skeleton").forEach((e) => {
      e.addEventListener("click", () => {
        let selectedValue = $("input[name=skeleton]:checked").val();
        updateParams("skeletonEnabled", selectedValue);
      });
    });

    document
      .getElementById("assessmentField")
      .addEventListener("input", (e) => {
        updateParams("assessment", e.target.value);
      });

    document.getElementById("authTokenField").addEventListener("input", (e) => {
      updateParams("authTokenField", e.target.value);
    });

    document.getElementById("submit").addEventListener("click", (e) => {
      e.preventDefault();
      let checked = true;
      let url = "assessment.html?";
      if (!params.authTokenField) {
        alert("auth token cannot be empty!");
        checked = false;
      }
      for (let item in params) {
        if (params.hasOwnProperty(item)) {
          url += item + "=" + params[item] + "&";
        }
      }
      if (checked) window.location.href = url;
    });
  </script>
</html>
